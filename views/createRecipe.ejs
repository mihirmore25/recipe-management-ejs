<%- include("./partials/header", {title: "Create Recipe"}) %>
<div class="form">
    <form action="/recipes/createRecipe" method="post" enctype="multipart/form-data">
        <h3 id="errorMsg" style="color: #8b0000; margin-top: 20px;"><%= error_msg %></h3>
        <h2>Create Recipe</h2>
        <input type="file" name="recipeImage" placeholder="image">
        <input type="text" name="title" placeholder="title" />
        <textarea
            type="text"
            name="description"
            placeholder="description"
            minlength="10"
            maxlength="200"
            class="description"
        ></textarea>
        <input type="text" name="totalTime" placeholder="total time" />
        <input type="text" name="prepTime" placeholder="preparation time" />
        <input type="text" name="cookingTime" placeholder="cooking time" />
        <div class="ingredientList">
            <div class="ingredientDiv">
                <input type="text" name="ingredients" class="ingredients" />
            </div>
        </div>
        <button type="button" id="addIngredientsBtn" class="addIngredient">
            + Ingredient
        </button>
        <div class="instructionList">
            <div class="instructionDiv">
                <input type="text" name="instructions" class="ingredients" />
            </div>
        </div>
        <button type="button" id="addInstructionsBtn" class="addInstruction">
            + Instruction
        </button>
        <input type="text" name="calories" placeholder="calories" />
        <input type="text" name="carbs" placeholder="carbs" />
        <input type="text" name="protein" placeholder="protein" />
        <input type="text" name="fat" placeholder="fat" />
        <button type="submit" class="createRecipe">Create Recipe</button>
    </form>
</div>
<a href="/recipes">Back to Recipes</a>
<script>
    let addIngredientsBtn = document.getElementById("addIngredientsBtn");
    let addInstructionsBtn = document.getElementById("addInstructionsBtn");
    let instructionList = document.querySelector(".instructionList");
    let ingredientList = document.querySelector(".ingredientList");
    let ingredientDiv = document.querySelectorAll(".ingredientDiv")[0];
    let instructionDiv = document.querySelectorAll(".instructionDiv")[0];

    addIngredientsBtn.addEventListener("click", function () {
        let newIngredients = ingredientDiv.cloneNode(true);
        let input = newIngredients.getElementsByTagName("input")[0];
        input.value = "";
        ingredientList.appendChild(newIngredients);
    });

    addInstructionsBtn.addEventListener("click", function () {
        let newInstructions = instructionDiv.cloneNode(true);
        let input = newInstructions.getElementsByTagName("input")[0];
        input.value = "";
        instructionList.appendChild(newInstructions);
    });
</script>

<%- include("./partials/footer") %>
